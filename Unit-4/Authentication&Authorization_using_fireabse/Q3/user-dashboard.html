<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Dashboard</title>
</head>
<body>
    <h2>User Dashboard</h2>
    <div id="productList"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCjcThseYRSMshvXJlLlcFTaDDjq8F2qyk",
            authDomain: "ecommerce-admin-panel-e729a.firebaseapp.com",
            databaseURL: "https://ecommerce-admin-panel-e729a-default-rtdb.firebaseio.com",
            projectId: "ecommerce-admin-panel-e729a",
            storageBucket: "ecommerce-admin-panel-e729a.firebasestorage.app",
            messagingSenderId: "521635669190",
            appId: "1:521635669190:web:550ed835bc04f6a851e3c7"
        };
        const app = initializeApp(firebaseConfig);
        const db = getDatabase();

        const role = sessionStorage.getItem("role");
        if (role !== "user") window.location.href = "admin-dashboard.html";

        const productList = document.getElementById("productList");
        onValue(ref(db, "products"), (snap) => {
            productList.innerHTML = "";
            const data = snap.val();
            for (let id in data) {
                const { title, price, image } = data[id];
                productList.innerHTML += `
                    <div>
                        <img src="${image}" width="100" />
                        <h3>${title}</h3>
                        <p>$${price}</p>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>